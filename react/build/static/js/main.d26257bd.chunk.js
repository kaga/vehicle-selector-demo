(this["webpackJsonpreact-vehicle-selector"]=this["webpackJsonpreact-vehicle-selector"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var i=n(12),a=n(0),r=n.n(a),c=n(16),d=n.n(c),o=(n(114),n(115),n(28)),u=n(161),l=n(77),s=n(29),b=n(101),v=n(157),f=n(160),p=n(13);function O(e){var t=Object(a.useState)(function(e){var t=Object(p.reduce)(e,(function(e,t){return e.push(t.createInitialState()),e}),new Array);return e.forEach((function(e,n){var i=t[n],a=e.updateFilterItemState(t,i);t[n]=a})),t}(e.filters)),n=Object(b.a)(t,2),r=n[0],c=n[1],d=r.map((function(e){return e.selectedOption}));return Object(a.useEffect)((function(){var t=function(e,t){var n=void 0;return e.filters.forEach((function(e,i){var a=t[i],r=e.updateFilterItemState(t,a);r&&!Object(p.isEqual)(a,r)&&(n||(n=Object(l.a)(t)),n[i]=r)})),n}(e,r);t&&c(t)}),[e,r]),Object(a.useEffect)((function(){Object(p.every)(d,p.isObject)&&e.onSelectedAllFilterItems(d)}),[e,d]),Object(i.jsx)(v.a,{maxWidth:"lg",children:Object(i.jsx)(f.a,{children:Object(i.jsx)(u.a,{container:!0,direction:"row",justify:"center",spacing:0,children:e.filters.map((function(t,n){var a=r[n];return Object(i.jsx)(u.a,{item:!0,xs:!0,children:t.createElement({state:Object(s.a)({},a),onStateUpdated:function(t){c((function(i){var a=Object(l.a)(i);return a[n]=t,function(e,t,n){return Object(p.reduce)(e.filters,(function(e,i,a){var r=t[a],c=i.onFilterItemUpdated(e,n,r);return c&&(e[a]=c),e}),t)}(e,a,t)}))}})},"filter-bar-item-grid-".concat(n))}))})})})}var m=n(45);function j(e){var t=e.query,n=e.parseResponse;return function(e){var i=e.variables,a=e.shouldSkip,r=void 0!==a&&a,c=Object(o.useQuery)(t,{variables:i,skip:r}).data,d=void 0;return c&&(d=n(c)),{data:d}}}function _(e){return Object(p.unionBy)(e,"id")}var y="\nfragment legacyPaginationCursor on LegacyPaginationCursor {\n    currentPage\n    perPage\n    total\n}\n",h="\nfragment uvdbI18n on UvdbI18n {\n    pl {\n        name\n    }\n    pt {\n        name\n    }\n    ro {\n        name\n    }\n}\n";function g(){var e=Object(m.a)(["\n  query VehicleSelectorYearOptions($uvdb_make_id: Int, $uvdb_model_id: Int, $limit: Int, $page: Int) {\n    uvdb {\n      vehicle_selector {\n        uvdb_years(uvdb_make_id: $uvdb_make_id, uvdb_model_id: $uvdb_model_id, limit: $limit, page: $page) {\n          items {\n            id\n          }\n          cursor {\n            ...legacyPaginationCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var $=j({query:Object(o.gql)(g(),y),parseResponse:function(e){return _(e.uvdb.vehicle_selector.uvdb_years.items)}}),x=n(23),I=n.n(x),S=n(162),k=n(169),E=n(168),q=n(170),M=n(167),U=n(166),C=n(163),F=Object(S.a)((function(e){return Object(k.a)({root:{padding:e.spacing(1)},list:{width:"100%",backgroundColor:e.palette.background.paper,overflow:"auto",maxHeight:300,minHeight:300},textfield:{width:"100%"}})}));function L(e){var t=e.disabled,n=void 0!==t&&t,r=e.title,c=e.searchQuery,d=e.selectedOption,o=e.options,u=e.getOptionLabel,l=e.onSearchQueryUpdated,s=e.onSelectedOptionUpdated,b=F(),v=null===o||void 0===o?void 0:o.map((function(e,t){return Object(i.jsx)(E.a,{selected:e.id===(null===d||void 0===d?void 0:d.id),button:!0,disabled:n,onClick:function(t){return null===s||void 0===s?void 0:s(e)},children:Object(i.jsx)(q.a,{primary:null===u||void 0===u?void 0:u(e)})},"".concat(r,"-").concat(t,"-").concat(e.id))})),f=Object(p.first)(o),O=Object(p.isUndefined)(d)&&1===Object(p.size)(o)&&f;return Object(a.useEffect)((function(){O&&f&&(null===s||void 0===s||s(f))})),Object(i.jsxs)(M.a,{className:b.root,children:[Object(i.jsx)(U.a,{className:b.textfield,disabled:n,value:c,label:r,margin:"dense",onChange:function(e){return null===l||void 0===l?void 0:l(e.target.value)}}),Object(i.jsx)(C.a,{className:b.list,children:v})]})}function A(e){var t=e.title,n=e.useClient;return function(e){var a=n(e.state).data,r=e.state;return Object(i.jsx)(L,Object(s.a)(Object(s.a)({},r),{},{title:t,options:a,getOptionLabel:function(e){return e.optionLabel},onSearchQueryUpdated:function(t){var n=I()(r,{searchQuery:{$set:t}});e.onStateUpdated(n)},onSelectedOptionUpdated:function(t){var n=I()(r,{selectedOption:{$set:t}});e.onStateUpdated(n)}}))}}var w={createInitialState:function(){return{searchQuery:"",selectedOption:void 0,disabled:!1}},createElement:function(e){return r.a.createElement(Q,e)},onFilterItemUpdated:function(e,t,n){var i=Object(p.indexOf)(e,t),a=Object(p.indexOf)(e,n),r=t.selectedOption;if(r&&i<a)switch(r.type){case"MAKE":return I()(n,{selectedMake:{$set:r},selectedOption:{$set:void 0}});case"MODEL":return I()(n,{selectedModel:{$set:r},selectedOption:{$set:void 0}})}},updateFilterItemState:function(e,t){var n=!1,i=Object(p.indexOf)(e,t);if(i>0){var a=e[i-1];n=n||Object(p.isUndefined)(a.selectedOption)}return I()(t,{disabled:{$set:n}})}},Q=A({title:"Year",useClient:function(e){var t,n,i=$({shouldSkip:e.disabled||!1,variables:{uvdb_make_id:null===(t=e.selectedMake)||void 0===t?void 0:t.id,uvdb_model_id:null===(n=e.selectedModel)||void 0===n?void 0:n.id,limit:1e3}}).data;return i?{data:i.filter((function(t){var n=e.searchQuery;return!n||t.id.toString().startsWith(n)})).map((function(e){return Object(s.a)({type:"YEAR",optionLabel:"".concat(e.id)},e)}))}:{data:void 0}}});function P(){var e=Object(m.a)(["\n  query VehicleSelectorMakeOptions(\n    $includeLocalization: Boolean = false\n    $uvdb_year_id: Int\n    $uvdb_year_min: Int\n    $uvdb_year_max: Int\n    $query: String\n    $limit: Int\n    $page: Int\n  ) {\n    uvdb {\n      vehicle_selector {\n        uvdb_makes(\n          uvdb_year_id: $uvdb_year_id\n          uvdb_year_min: $uvdb_year_min\n          uvdb_year_max: $uvdb_year_max\n          q: $query\n          limit: $limit\n          page: $page\n        ) {\n          items {\n            id\n            name\n            i18n @include(if: $includeLocalization) {\n              ...uvdbI18n\n            }\n          }\n          cursor {\n            ...legacyPaginationCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return P=function(){return e},e}var Y=j({query:Object(o.gql)(P(),y,h),parseResponse:function(e){return _(e.uvdb.vehicle_selector.uvdb_makes.items)}}),R={createInitialState:function(){return{searchQuery:"",selectedOption:void 0,disabled:!1}},createElement:function(e){return r.a.createElement(z,e)},onFilterItemUpdated:function(e,t,n){var i=Object(p.indexOf)(e,t),a=Object(p.indexOf)(e,n),r=t.selectedOption;if(r&&i<a)switch(r.type){case"YEAR":return I()(n,{selectedYear:{$set:r},selectedOption:{$set:void 0}})}},updateFilterItemState:function(e,t){var n=!1,i=Object(p.indexOf)(e,t);if(i>0){var a=e[i-1];n=n||Object(p.isUndefined)(a.selectedOption)}return I()(t,{disabled:{$set:n}})}},z=A({title:"Make",useClient:function(e){var t,n=Y({shouldSkip:e.disabled||!1,variables:{uvdb_year_id:null===(t=e.selectedYear)||void 0===t?void 0:t.id,query:e.searchQuery}}).data;return n?{data:n.map((function(e){return Object(s.a)({type:"MAKE",optionLabel:"".concat(e.name)},e)}))}:{data:void 0}}});function B(){var e=Object(m.a)(["\n  query VehicleSelectorModelOptions(\n    $includeLocalization: Boolean = false\n    $uvdb_make_id: Int!\n    $uvdb_year_id: Int\n    $uvdb_year_min: Int\n    $uvdb_year_max: Int\n    $query: String\n    $limit: Int\n    $page: Int\n  ) {\n    uvdb {\n      vehicle_selector {\n        uvdb_models(\n          uvdb_make_id: $uvdb_make_id\n          uvdb_year_id: $uvdb_year_id\n          uvdb_year_min: $uvdb_year_min\n          uvdb_year_max: $uvdb_year_max\n          q: $query\n          limit: $limit\n          page: $page\n        ) {\n          items {\n            id\n            name\n            i18n @include(if: $includeLocalization) {\n              ...uvdbI18n\n            }\n          }\n          cursor {\n            ...legacyPaginationCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}var N=j({query:Object(o.gql)(B(),y,h),parseResponse:function(e){return _(e.uvdb.vehicle_selector.uvdb_models.items)}}),D={createInitialState:function(){return{searchQuery:"",selectedOption:void 0,disabled:!1}},createElement:function(e){return r.a.createElement(J,e)},onFilterItemUpdated:function(e,t,n){var i=Object(p.indexOf)(e,t),a=Object(p.indexOf)(e,n),r=t.selectedOption;if(r&&i<a)switch(r.type){case"MAKE":return I()(n,{selectedMake:{$set:r},selectedOption:{$set:void 0}});case"YEAR":return I()(n,{selectedYear:{$set:r},selectedOption:{$set:void 0}})}},updateFilterItemState:function(e,t){var n=Object(p.isUndefined)(t.selectedMake),i=Object(p.indexOf)(e,t);if(i>0){var a=e[i-1];n=n||Object(p.isUndefined)(a.selectedOption)}return I()(t,{disabled:{$set:n}})}},J=A({title:"Model",useClient:function(e){var t=e.selectedMake,n=e.selectedYear,i=e.searchQuery,a=e.disabled,r=void 0;t&&(r={uvdb_year_id:null===n||void 0===n?void 0:n.id,uvdb_make_id:t.id,query:i});var c=N({shouldSkip:a||Object(p.isUndefined)(r),variables:r}).data;return c?{data:c.map((function(e){return Object(s.a)({type:"MODEL",optionLabel:"".concat(e.name,"-").concat(e.id)},e)}))}:{data:void 0}}});var K=function(){var e=new o.ApolloClient({uri:"https://api.parts-pal.com/node-api/graphql",cache:new o.InMemoryCache}),t=function(e){e&&console.log("You selected: ".concat(JSON.stringify(e)))};return Object(i.jsx)(r.a.Fragment,{children:Object(i.jsx)(o.ApolloProvider,{client:e,children:Object(i.jsxs)(u.a,{container:!0,spacing:1,direction:"column",justify:"center",children:[Object(i.jsx)(u.a,{item:!0,children:Object(i.jsx)(O,{filters:[w,R,D],onSelectedAllFilterItems:function(e){return t(e)}})}),Object(i.jsx)(u.a,{item:!0,children:Object(i.jsx)(O,{filters:[R,D,w],onSelectedAllFilterItems:function(e){return t(e)}})})]})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))},H=n(164),T=n(71),W=n(100),G=Object(W.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:T.a.A400},background:{default:"#fff"}}}),X=n(165);d.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsxs)(H.a,{theme:G,children:[Object(i.jsx)(X.a,{}),Object(i.jsx)(K,{})]})}),document.getElementById("root")),V()}},[[125,1,2]]]);
//# sourceMappingURL=main.d26257bd.chunk.js.map