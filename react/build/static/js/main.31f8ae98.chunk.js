(this["webpackJsonpreact-vehicle-selector"]=this["webpackJsonpreact-vehicle-selector"]||[]).push([[0],{114:function(e,n,t){},115:function(e,n,t){},125:function(e,n,t){"use strict";t.r(n);var i=t(12),a=t(0),r=t.n(a),c=t(16),d=t.n(c),o=(t(114),t(115),t(28)),u=t(161),l=t(72),s=t(29),b=t(101),v=t(157),f=t(160),p=t(23),O=t.n(p),m=t(14);function j(e){var n=Object(a.useState)(function(e){var n=Object(m.reduce)(e,(function(e,n){return e.push(n.createInitialState()),e}),new Array);return e.forEach((function(e,t){var i=n[t],a=e.updateFilterItemState(n,i);n[t]=a})),n}(e.filters)),t=Object(b.a)(n,2),r=t[0],c=t[1],d=r.map((function(e){return e.selectedOption}));return Object(a.useEffect)((function(){var n=function(e,n){var t=void 0;return e.filters.forEach((function(e,i){var a=n[i],r=e.updateFilterItemState(n,a);r&&!Object(m.isEqual)(a,r)&&(t||(t=Object(l.a)(n)),t[i]=r)})),t}(e,r);n&&c(n)}),[e,r]),Object(a.useEffect)((function(){Object(m.every)(d,m.isObject)&&e.onSelectedAllFilterItems(d)}),[e,d]),Object(i.jsx)(v.a,{maxWidth:"lg",children:Object(i.jsx)(f.a,{children:Object(i.jsx)(u.a,{container:!0,direction:"row",justify:"center",spacing:0,children:e.filters.map((function(n,t){var a=r[t];return Object(i.jsx)(u.a,{item:!0,xs:!0,children:n.createElement(Object(s.a)(Object(s.a)({},a),{},{onSearchQueryUpdated:function(e){return function(e,n,t){e((function(e){var i=Object(l.a)(e),a=e[t],r=O()(a,{searchQuery:{$set:n}});return i[t]=r,i}))}(c,e,t)},onSelectedOptionUpdated:function(n){return function(e,n,t,i){n((function(n){var a=Object(l.a)(n),r=n[i],c=O()(r,{selectedOption:{$set:t}});return a[i]=c,e.filters.forEach((function(e,t){var i=n[t],r=e.onFilterItemUpdated(a,c,i);r&&(a[t]=r)})),a}))}(e,c,n,t)}}))},"filter-bar-item-grid-".concat(t))}))})})})}var _=t(45);function y(e){var n=e.query,t=e.parseResponse;return function(e){var i=e.variables,a=e.shouldSkip,r=void 0!==a&&a,c=Object(o.useQuery)(n,{variables:i,skip:r}).data,d=void 0;return c&&(d=t(c)),{data:d}}}function h(e){return Object(m.unionBy)(e,"id")}var g="\nfragment legacyPaginationCursor on LegacyPaginationCursor {\n    currentPage\n    perPage\n    total\n}\n",$="\nfragment uvdbI18n on UvdbI18n {\n    pl {\n        name\n    }\n    pt {\n        name\n    }\n    ro {\n        name\n    }\n}\n";function x(){var e=Object(_.a)(["\n  query VehicleSelectorYearOptions($uvdb_make_id: Int, $uvdb_model_id: Int, $limit: Int, $page: Int) {\n    uvdb {\n      vehicle_selector {\n        uvdb_years(uvdb_make_id: $uvdb_make_id, uvdb_model_id: $uvdb_model_id, limit: $limit, page: $page) {\n          items {\n            id\n          }\n          cursor {\n            ...legacyPaginationCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}var I=y({query:Object(o.gql)(x(),g),parseResponse:function(e){return h(e.uvdb.vehicle_selector.uvdb_years.items)}}),S=t(162),k=t(169),E=t(168),q=t(170),M=t(167),C=t(166),F=t(163),L=Object(S.a)((function(e){return Object(k.a)({root:{padding:e.spacing(1)},list:{width:"100%",backgroundColor:e.palette.background.paper,overflow:"auto",maxHeight:300,minHeight:300}})}));function U(e){var n=e.disabled,t=void 0!==n&&n,r=e.title,c=e.searchQuery,d=e.selectedOption,o=e.options,u=e.getOptionLabel,l=e.onSearchQueryUpdated,s=e.onSelectedOptionUpdated,b=L(),v=null===o||void 0===o?void 0:o.map((function(e,n){return Object(i.jsx)(E.a,{selected:e.id===(null===d||void 0===d?void 0:d.id),button:!0,disabled:t,onClick:function(n){return null===s||void 0===s?void 0:s(e)},children:Object(i.jsx)(q.a,{primary:null===u||void 0===u?void 0:u(e)})},"".concat(r,"-").concat(n,"-").concat(e.id))})),f=Object(m.first)(o),p=Object(m.isUndefined)(d)&&1===Object(m.size)(o)&&f;return Object(a.useEffect)((function(){p&&f&&(null===s||void 0===s||s(f))})),Object(i.jsxs)(M.a,{className:b.root,children:[Object(i.jsx)(C.a,{disabled:t,value:c,label:r,margin:"dense",onChange:function(e){return null===l||void 0===l?void 0:l(e.target.value)}}),Object(i.jsx)(F.a,{className:b.list,children:v})]})}function A(e){var n=e.title,t=e.useClient;return function(e){var a=t(e).data;return Object(i.jsx)(U,Object(s.a)(Object(s.a)({},e),{},{title:n,options:a,getOptionLabel:function(e){return e.optionLabel}}))}}var w={createInitialState:function(){return{searchQuery:"",selectedOption:void 0,disabled:!1}},createElement:function(e){return r.a.createElement(P,e)},onFilterItemUpdated:function(e,n,t){var i=Object(m.indexOf)(e,n),a=Object(m.indexOf)(e,t),r=n.selectedOption;if(r&&i<a)switch(r.type){case"MAKE":return O()(t,{selectedMake:{$set:r},selectedOption:{$set:void 0}});case"MODEL":return O()(t,{selectedModel:{$set:r},selectedOption:{$set:void 0}})}},updateFilterItemState:function(e,n){var t=!1,i=Object(m.indexOf)(e,n);if(i>0){var a=e[i-1];t=t||Object(m.isUndefined)(a.selectedOption)}return O()(n,{disabled:{$set:t}})}},P=A({title:"Year",useClient:function(e){var n,t,i=I({shouldSkip:e.disabled||!1,variables:{uvdb_make_id:null===(n=e.selectedMake)||void 0===n?void 0:n.id,uvdb_model_id:null===(t=e.selectedModel)||void 0===t?void 0:t.id,limit:1e3}}).data;return i?{data:i.map((function(e){return Object(s.a)({type:"YEAR",optionLabel:"".concat(e.id)},e)}))}:{data:void 0}}});function Q(){var e=Object(_.a)(["\n  query VehicleSelectorMakeOptions(\n    $includeLocalization: Boolean = false\n    $uvdb_year_id: Int\n    $uvdb_year_min: Int\n    $uvdb_year_max: Int\n    $query: String\n    $limit: Int\n    $page: Int\n  ) {\n    uvdb {\n      vehicle_selector {\n        uvdb_makes(\n          uvdb_year_id: $uvdb_year_id\n          uvdb_year_min: $uvdb_year_min\n          uvdb_year_max: $uvdb_year_max\n          q: $query\n          limit: $limit\n          page: $page\n        ) {\n          items {\n            id\n            name\n            i18n @include(if: $includeLocalization) {\n              ...uvdbI18n\n            }\n          }\n          cursor {\n            ...legacyPaginationCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Q=function(){return e},e}var Y=y({query:Object(o.gql)(Q(),g,$),parseResponse:function(e){return h(e.uvdb.vehicle_selector.uvdb_makes.items)}}),R={createInitialState:function(){return{searchQuery:"",selectedOption:void 0,disabled:!1}},createElement:function(e){return r.a.createElement(z,e)},onFilterItemUpdated:function(e,n,t){var i=Object(m.indexOf)(e,n),a=Object(m.indexOf)(e,t),r=n.selectedOption;if(r&&i<a)switch(r.type){case"YEAR":return O()(t,{selectedYear:{$set:r},selectedOption:{$set:void 0}})}},updateFilterItemState:function(e,n){var t=!1,i=Object(m.indexOf)(e,n);if(i>0){var a=e[i-1];t=t||Object(m.isUndefined)(a.selectedOption)}return O()(n,{disabled:{$set:t}})}},z=A({title:"Make",useClient:function(e){var n,t=Y({shouldSkip:e.disabled||!1,variables:{uvdb_year_id:null===(n=e.selectedYear)||void 0===n?void 0:n.id,query:e.searchQuery}}).data;return t?{data:t.map((function(e){return Object(s.a)({type:"MAKE",optionLabel:"".concat(e.name,"-").concat(e.id)},e)}))}:{data:void 0}}});function B(){var e=Object(_.a)(["\n  query VehicleSelectorModelOptions(\n    $includeLocalization: Boolean = false\n    $uvdb_make_id: Int!\n    $uvdb_year_id: Int\n    $uvdb_year_min: Int\n    $uvdb_year_max: Int\n    $query: String\n    $limit: Int\n    $page: Int\n  ) {\n    uvdb {\n      vehicle_selector {\n        uvdb_models(\n          uvdb_make_id: $uvdb_make_id\n          uvdb_year_id: $uvdb_year_id\n          uvdb_year_min: $uvdb_year_min\n          uvdb_year_max: $uvdb_year_max\n          q: $query\n          limit: $limit\n          page: $page\n        ) {\n          items {\n            id\n            name\n            i18n @include(if: $includeLocalization) {\n              ...uvdbI18n\n            }\n          }\n          cursor {\n            ...legacyPaginationCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}var D=y({query:Object(o.gql)(B(),g,$),parseResponse:function(e){return h(e.uvdb.vehicle_selector.uvdb_models.items)}}),J={createInitialState:function(){return{searchQuery:"",selectedOption:void 0,disabled:!1}},createElement:function(e){return r.a.createElement(K,e)},onFilterItemUpdated:function(e,n,t){var i=Object(m.indexOf)(e,n),a=Object(m.indexOf)(e,t),r=n.selectedOption;if(r&&i<a)switch(r.type){case"MAKE":return O()(t,{selectedMake:{$set:r},selectedOption:{$set:void 0}});case"YEAR":return O()(t,{selectedYear:{$set:r},selectedOption:{$set:void 0}})}},updateFilterItemState:function(e,n){var t=Object(m.isUndefined)(n.selectedMake),i=Object(m.indexOf)(e,n);if(i>0){var a=e[i-1];t=t||Object(m.isUndefined)(a.selectedOption)}return O()(n,{disabled:{$set:t}})}},K=A({title:"Model",useClient:function(e){var n=e.selectedMake,t=e.selectedYear,i=e.searchQuery,a=e.disabled,r=void 0;n&&(r={uvdb_year_id:null===t||void 0===t?void 0:t.id,uvdb_make_id:n.id,query:i});var c=D({shouldSkip:a||Object(m.isUndefined)(r),variables:r}).data;return c?{data:c.map((function(e){return Object(s.a)({type:"MODEL",optionLabel:"".concat(e.name,"-").concat(e.id)},e)}))}:{data:void 0}}});var N=function(){var e=new o.ApolloClient({uri:"https://api.parts-pal.com/node-api/graphql",cache:new o.InMemoryCache}),n=function(e){e&&console.log("You selected: ".concat(JSON.stringify(e)))};return Object(i.jsx)(r.a.Fragment,{children:Object(i.jsx)(o.ApolloProvider,{client:e,children:Object(i.jsxs)(u.a,{container:!0,spacing:1,direction:"column",justify:"center",children:[Object(i.jsx)(u.a,{item:!0,children:Object(i.jsx)(j,{filters:[w,R,J],onSelectedAllFilterItems:function(e){return n(e)}})}),Object(i.jsx)(u.a,{item:!0,children:Object(i.jsx)(j,{filters:[R,J,w],onSelectedAllFilterItems:function(e){return n(e)}})})]})})})},V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,172)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),i(e),a(e),r(e),c(e)}))},H=t(164),T=t(71),W=t(100),G=Object(W.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:T.a.A400},background:{default:"#fff"}}}),X=t(165);d.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsxs)(H.a,{theme:G,children:[Object(i.jsx)(X.a,{}),Object(i.jsx)(N,{})]})}),document.getElementById("root")),V()}},[[125,1,2]]]);
//# sourceMappingURL=main.31f8ae98.chunk.js.map